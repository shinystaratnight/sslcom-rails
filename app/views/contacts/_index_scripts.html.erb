<script type="text/javascript">
jQuery.noConflict();
jQuery(function($) {
  $(document).ready(function() {
    <%js_roles = CertificateContent::CONTACT_ROLES.dclone%>
    var form_types = ["<%=js_roles.map{|role|role.insert(0,"#certificate_content_")}.join("_form\", \"").html_safe%>_form"];
    var check_boxes = ["<%=(js_roles-%w(administrative)).join("_checkbox\", \"").html_safe%>_checkbox"];
    $(':checkbox[id*=checkbox]').click(function(){
      to = $(this).attr('id').length - '_checkbox'.length;
      form = $(this).attr('id').substring(0,to);
      if(!$('#'+form+'_form').is(":visible")){
        $('#'+form+'_form').show();
      }
      else{
        $('#'+form+'_form').hide();
      }
    });
    $('form[id^=edit_certificate_content]').submit(function(){
      for(i=0; i<check_boxes.length; i++){
        if($(check_boxes[i+1]).attr("checked"))
          $(form_types[i+1]+" input").each(function(index){
            if($(this).attr('id')!='roles')
              $(this).val($($(form_types[0]+" input")[index]).val());
          });
      }
    });
    for(i=0; i<check_boxes.length; i++){
      if($(check_boxes[i+1]).attr("checked"))
        $(form_types[i+1]).hide();
    }
  });
});
</script>
