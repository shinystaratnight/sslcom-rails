#global_footer.clearfix
  %section#logo_share
    #logo_box
    =render partial: 'layouts/social_share'
    .site_seal_footer=render 'site/site_seal'
  %ul.section_box
    %h4 Products and Services
    -Certificate.root_products.each do |c|
      %li=link_to c.title, certificate_url(:id=>c.product_root)
    %li=link_to "Smart SeaL with Artifacts", details_site_seals_url
    -#%li=link_to "Shortened Secure Links", surls_root_url(:subdomain=>Surl::SUBDOMAIN)
    %li=link_to "Share Short Links", "http://ssl.gs"
  %ul.section_box
    %h4 Programs
    %li=link_to "Resellers", resellers_root_url(:subdomain=>Reseller::SUBDOMAIN)
    %li=link_to "RESTful API", restful_api_url
    -Reseller::TARGETED.each do |t|
      %li=send :link_to, t.titleize, eval("#{t}_url")
    %li=link_to "Api Documents", restful_apidocs_apply_url
  %ul.section_box
    %h4 Support
    %li=link_to "Resources", "https://support.ssl.com/"
    %li=link_to "FAQ", "http://faq.ssl.com/"
    %li=link_to "Knowledgebase", "https://support.ssl.com/Knowledgebase/List"
    %li=link_to "Open Ticket", "https://support.ssl.com/Tickets/Submit"
    %li=link_to "SSL Tools", "http://www.ssltools.com"
    %li=link_to "SSL Compatibility & Acceptance", browsers_url
    %li=link_to "Validation Requirements", requirements_validations_url
    %li=link_to "Country Codes", country_codes_csrs_url
    -#%li=link_to "Vpn Compatibility", "http://info.ssl.com/article.aspx?id=10241"
    -#%li Chat
  -#%ul.section_box
  -#  %h4 More from SSL.com
  -#  %li=link_to "News", news_url
  -#  -#%li Blog
  -#  -#%li SSL.com on Twitter
  -#  -#%li SSL.com on Facebook
  %ul.section_box
    %h4 Company
    %li=link_to "About SSL.com", about_url
    %li=link_to "Contact Us", contact_us_url
    %li=link_to "Community", "http://answers.ssl.com"
    %li=link_to "CA Repository", repository_url
    =# %li Webtrust Audit
    -#%li Help
    %li=link_to "What is SSL?", "http://info.ssl.com/article.aspx?id=10241"
    =#%li Press Room
    =#%li Careers
    =#%li Sitemap
#copyright_statement
  &copy;#{Time.now.year} SSL.COM CORP ALL RIGHTS RESERVED.
  %span.footer_link=link_to "Privacy Policy", privacy_policy_url
  %span.footer_link=link_to "Terms of Service", terms_of_use_url
  %span.footer_link=link_to "Copyright", copyright_url
/ begin olark code
%script{"data-cfasync" => "false", :type => "text/javascript"}
  \/*{literal}
  :cdata
    */
    window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
    \/* custom configuration goes here (www.olark.com/documentation) */
    olark.identify('3356-178-10-2724');/*
  {/literal}*/
/ end olark code
:javascript
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30469369-1']);
  _gaq.push(['_setDomainName', 'ssl.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
-unless @certificate_order.blank? || @certificate_order.id.blank?
  :javascript
    jQuery(function($){
      $("#start_over").click(function(){
        $.ajax({
          url: "#{start_over_certificate_order_url(@certificate_order.ref)}",
          type: "POST",
          beforeSend: function(){
            return confirm("Are you sure you want to start over with this certificate order?");
          },
          success: function(data, status){
            if(data.certificate_order.certificate_content.workflow_state=="new")
              window.location.href = "#{edit_certificate_order_url(@certificate_order.ref)}";
          }
        });
      });
    });
:javascript
  jQuery(function($){
    $.prettyLoader();
    $(".btn-buynow span, .hide_me").hide();
    $("a[rel^='prettyPopin']").prettyPopin();
    $('div.flash_message').click(function(){
      $(this).fadeOut();
    });
    $('div.flash_message a').click(function(event){
      event.stopPropagation();
    });
    $("a[rel^='prettyPhoto']").prettyPhoto({social_tools: false, allowresize:false, theme:'pp_default', showTitle:false});
    $('.striped_div > div:nth-child(odd)').css("background-color","#eeeeee");
    $('.striped_tr tr:nth-child(odd)').css("background-color","#eeeeee");
    $('#close_window').live('click', function(){
      window.close();
    });
    $('.close').live('click', function(){
      $(this).remove();
    });
    $("input[name='next']").click(function(){
      $("#waiting_bar").show();
    });
    $("#cancel_reseller_signup").click(function(){
      $.ajax({
        url: "#{cancel_reseller_signup_users_url}",
        type: "GET",
        beforeSend: function(){
          return confirm("Are you sure you want to cancel your reseller signup?");
        },
        success: function(data, status){
          if($.inArray("#{Role::CUSTOMER.to_sym}", data.user.role_symbols)>-1)
            window.location.href = "#{account_url}";
        }
      });
    });
    //#{"$('#colorpicker').farbtastic('.color');" if Rails.env.development?}
    //cart functions
    $.toMoneyFloat = function(money){
      money = money.replace(",","");
      money = money.replace("$","");
      var usdIndex = money.indexOf(" USD");
      if(usdIndex!=-1)
        money = money.substring(0,usdIndex)
      return money;
    }
    $.adjust_items_in_cart = function(){
      var items = "items";
      var howMany = $.get_cart_items().length;
      if(howMany==1)
        items = "item";
      $("#cart_size").text(howMany.toString()+" "+items+" in cart");
    };
    $.adjust_order_total = function(){
      var total = 0;
      $('.amount').each(function(){
        total += parseFloat($.toMoneyFloat($(this).text()));
      });
      total=(total!=0)?total.toFixed(2).toString():"0.00";
      $('#cart_total').text('$'+total+" USD");
    };
    $.empty_out_cart = function(){
      $.cookie("cart", "", {path: '/'});
      $('.add_to_cart_button').removeAttr("disabled");
      $('#cart','#cart_total').effect("highlight", {}, 3000);
    };
    $('#empty_cart').click(function(){
      $.empty_out_cart();
    })
    $('.remove_from_cart_link').click(function(){
      var id = $(this).attr("id")
      $.remove_from_cart(id);
      $(this).parents('tr[id='+$(this).attr("id")+']').
        fadeOut('slow', function(){
          $(this).remove();
          $.adjust_items_in_cart();
          $.adjust_order_total();
          $('#cart','#cart_total').effect("highlight", {}, 3000);}
        );
    });
    $.save_cart = function(cart){
      if(cart=="" || cart.length==0)
        $.cookie("cart", null); //deletes cookie jquery method
      else
        $.cookie("cart", $.toJSON(cart), { expires:
          #{Settings.cart_cookie_days}, path: '/'});
    };
    $.get_cart_items = function(){
      if($.cookie("cart")==null || $.cookie("cart")=="")
        return [];
      else
        return $.evalJSON($.cookie("cart"));
    };
    $.get_affiliate = function(){
      return ($.cookie("aid")==null || $.cookie("aid")=="")
        ? #{ShoppingCart::DEFAULT_AFFILIATE_ID} : $.cookie("aid");
    };
    $.remove_from_cart=function(indx){
      cart = $.get_cart_items();
      cart.remove(indx);
      $.save_cart(cart);
    };
    $.add_remove_cart_items=function(add, item){
      cart = $.get_cart_items();
      indx = $.cart_has_item(item) //find index of existing line item
      if(indx==-1)
        if(add){
          item["#{ShoppingCart::QUANTITY}"]=1;
          if($.isArray(cart)){
            cart.push(item);
          }
          else
            cart=[item];
        }
        else
          return;
      else{
        matched=cart[indx];
        if(add)
          ++matched["#{ShoppingCart::QUANTITY}"];
        else
          if(matched["#{ShoppingCart::QUANTITY}"]==1){
            cart.remove(indx);
          }
          else
            --matched["#{ShoppingCart::QUANTITY}"];
      }
      $.save_cart(cart);
    };
    $.cart_has_item = function(cart_item){
      items=$.get_cart_items();
      if(items==null)
        return -1;
      else{
        var match=true, indx=-1;
        $(items).each(function(i, v){
          match=true;
          for (var key in v) {
            if(key!="#{ShoppingCart::QUANTITY}" &&
                key!="#{ShoppingCart::AFFILIATE}" && v[key]!=cart_item[key]){
              match=false;
              break;
            }
          }
          if(match){
            indx=i;
            return false;
          }
        });
        return indx;
      }
    };
    // Array Remove - By John Resig (MIT Licensed)
    Array.prototype.remove = function(from, to) {
      var rest = this.slice((to || from) + 1 || this.length);
      this.length = from < 0 ? this.length + from : from;
      return this.push.apply(this, rest);
    };
    Array.prototype.find = function(searchStr) {
      var returnArray = false;
      for (i=0; i<this.length; i++) {
        if (typeof(searchStr) == 'function') {
          if (searchStr.test(this[i])) {
            if (!returnArray) { returnArray = [] }
            returnArray.push(i);
          }
        } else {
          if (this[i]===searchStr) {
            if (!returnArray) { returnArray = [] }
            returnArray.push(i);
          }
        }
      }
      return returnArray;
    };
    $.update_balance_after_load = function(){
      var bracket = $.toMoneyFloat($('#funded_account_amount').val());
      if(bracket == null || bracket == "" || bracket == ".")
        bracket = 0;
      var current_balance = $.toMoneyFloat($('#current_balance').text());
      $('#balance_after_load').text('$'+((parseFloat(bracket)+parseFloat(current_balance)).toFixed(2))+" USD");
    };
    $.adjust_items_in_cart();
    /* Easiest Tooltips CONFIG */
    // these 2 variable determine popup's distance from the cursor
    // you might want to adjust to get the right result
    var xOffset = 10;
    var yOffset = 30;
    /* END CONFIG */
  });

